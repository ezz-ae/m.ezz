
{
  "entities": {
    "User": {
      "title": "User",
      "description": "Represents a user of the system.",
      "type": "object",
      "properties": {
        "displayName": { "type": "string", "description": "User's display name." },
        "email": { "type": "string", "description": "User's email address.", "format": "email" },
        "createdAt": { "type": "string", "description": "Timestamp indicating when the user was created.", "format": "date-time" },
        "role": { "type": "string", "description": "User's role in the system.", "enum": ["owner", "guest", "beta"] }
      },
      "required": ["displayName", "email", "createdAt", "role"]
    },
    "Notebook": {
      "title": "Notebook",
      "description": "Represents one 'living intelligence document'.",
      "type": "object",
      "properties": {
        "ownerId": { "type": "string", "description": "ID of the user who owns the notebook." },
        "slug": { "type": "string", "description": "URL-friendly slug for the notebook." },
        "title": { "type": "string", "description": "Title of the notebook." },
        "description": { "type": "string", "description": "Description of the notebook." },
        "visibility": { "type": "string", "description": "Visibility of the notebook.", "enum": ["public", "private", "unlisted"] },
        "tags": { "type": "array", "items": { "type": "string" }, "description": "Tags associated with the notebook." },
        "createdAt": { "type": "string", "format": "date-time", "description": "Timestamp of creation." },
        "updatedAt": { "type": "string", "format": "date-time", "description": "Timestamp of last update." },
        "fctProfile": {
          "type": "object",
          "properties": {
            "fadeMode": { "type": "string", "enum": ["soft", "strict"] },
            "maxBufferSize": { "type": "number" }
          },
          "required": ["fadeMode", "maxBufferSize"]
        }
      },
      "required": ["ownerId", "slug", "title", "visibility", "createdAt", "updatedAt", "fctProfile"]
    },
    "Note": {
      "title": "Note",
      "description": "Represents an atomic piece of input (text, thought, extract, transcript).",
      "type": "object",
      "properties": {
        "authorId": { "type": "string", "description": "ID of the user who authored the note." },
        "content": { "type": "string", "description": "Content of the note." },
        "source": { "type": "string", "description": "Source of the note.", "enum": ["manual", "import", "transcript", "ai"] },
        "sessionId": { "type": "string", "description": "ID of the session this note belongs to." },
        "createdAt": { "type": "string", "format": "date-time", "description": "Timestamp of creation." },
        "updatedAt": { "type": "string", "format": "date-time", "description": "Timestamp of last update." }
      },
      "required": ["authorId", "content", "source", "createdAt", "updatedAt"]
    },
    "Concept": {
      "title": "Concept",
      "description": "Represents a normalized idea or meaning extracted from notes.",
      "type": "object",
      "properties": {
        "label": { "type": "string", "description": "Label for the concept." },
        "summary": { "type": "string", "description": "Summary of the concept." },
        "relatedNoteIds": { "type": "array", "items": { "type": "string" }, "description": "IDs of notes related to this concept." },
        "frequency": { "type": "number", "description": "Frequency of the concept." },
        "returnRate": { "type": "number", "description": "Return rate of the concept." },
        "driftScore": { "type": "number", "description": "Drift score of the concept." },
        "persistenceScore": { "type": "number", "description": "Persistence score of the concept." }
      },
      "required": ["label", "summary", "relatedNoteIds", "frequency", "returnRate", "driftScore", "persistenceScore"]
    },
    "Pattern": {
      "title": "Pattern",
      "description": "Represents a recurring theme across multiple notebooks.",
      "type": "object",
      "properties": {
        "label": { "type": "string", "description": "Label for the pattern." },
        "description": { "type": "string", "description": "Description of the pattern." },
        "notebookIds": { "type": "array", "items": { "type": "string" }, "description": "IDs of notebooks where this pattern appears." },
        "conceptIds": { "type": "array", "items": { "type": "string" }, "description": "IDs of concepts related to this pattern." },
        "globalFrequency": { "type": "number", "description": "Global frequency of the pattern." },
        "createdAt": { "type": "string", "format": "date-time", "description": "Timestamp of creation." },
        "updatedAt": { "type": "string", "format": "date-time", "description": "Timestamp of last update." }
      },
      "required": ["label", "description", "notebookIds", "conceptIds", "globalFrequency", "createdAt", "updatedAt"]
    },
    "Session": {
      "title": "Session",
      "description": "Represents a time-bounded thinking or work session.",
      "type": "object",
      "properties": {
        "userId": { "type": "string", "description": "ID of the user for this session." },
        "notebookId": { "type": "string", "description": "ID of the notebook for this session." },
        "startedAt": { "type": "string", "format": "date-time", "description": "Timestamp when the session started." },
        "endedAt": { "type": "string", "format": "date-time", "description": "Timestamp when the session ended." },
        "noteCount": { "type": "number", "description": "Number of notes created during the session." },
        "context": { "type": "string", "description": "Context of the session." }
      },
      "required": ["userId", "notebookId", "startedAt", "noteCount", "context"]
    },
    "LedgerEntry": {
      "title": "LedgerEntry",
      "description": "Represents a cognitive ledger line (reasoning trace).",
      "type": "object",
      "properties": {
        "notebookId": { "type": "string", "description": "ID of the notebook for this entry." },
        "userId": { "type": "string", "description": "ID of the user for this entry." },
        "type": { "type": "string", "description": "Type of ledger entry.", "enum": ["decision", "reflection", "transform", "fade"] },
        "payload": { "type": "object", "description": "Payload associated with the ledger entry." },
        "createdAt": { "type": "string", "format": "date-time", "description": "Timestamp of creation." },
        "hash": { "type": "string", "description": "Hash of the ledger entry." },
        "prevHash": { "type": "string", "description": "Hash of the previous ledger entry." }
      },
      "required": ["notebookId", "type", "payload", "createdAt", "hash"]
    },
    "Artifact": {
      "title": "Artifact",
      "description": "Represents a forgetting artifact (compressed learning from decayed data).",
      "type": "object",
      "properties": {
        "notebookId": { "type": "string", "description": "ID of the notebook for this artifact." },
        "sourceNoteIds": { "type": "array", "items": { "type": "string" }, "description": "IDs of source notes." },
        "schemaLabel": { "type": "string", "description": "Schema label for the artifact." },
        "summary": { "type": "string", "description": "Summary of the artifact." },
        "compressedAt": { "type": "string", "format": "date-time", "description": "Timestamp when the artifact was compressed." },
        "decayLevel": { "type": "number", "description": "Decay level of the artifact (0-1)." }
      },
      "required": ["notebookId", "sourceNoteIds", "schemaLabel", "summary", "compressedAt", "decayLevel"]
    },
    "Event": {
      "title": "Event",
      "description": "Represents an analytics or behavioral signal.",
      "type": "object",
      "properties": {
        "userId": { "type": "string", "description": "ID of the user who triggered the event." },
        "type": { "type": "string", "description": "Type of event.", "enum": ["page_view", "notebook_open", "session_start", "session_end", "note_created"] },
        "path": { "type": "string", "description": "Path associated with the event." },
        "notebookId": { "type": "string", "description": "ID of the notebook related to the event." },
        "ts": { "type": "string", "format": "date-time", "description": "Timestamp of the event." },
        "meta": { "type": "object", "description": "Metadata associated with the event." }
      },
      "required": ["type", "ts"]
    }
  },
  "auth": {
    "providers": ["password", "anonymous"]
  },
  "firestore": {
    "structure": [
      {
        "path": "/users/{userId}",
        "definition": { "schema": { "$ref": "#/backend/entities/User" }, "description": "Stores user profiles." }
      },
      {
        "path": "/notebooks/{notebookId}",
        "definition": { "schema": { "$ref": "#/backend/entities/Notebook" }, "description": "Stores notebooks." }
      },
      {
        "path": "/notebooks/{notebookId}/notes/{noteId}",
        "definition": { "schema": { "$ref": "#/backend/entities/Note" }, "description": "Stores notes within a specific notebook." }
      },
      {
        "path": "/notebooks/{notebookId}/concepts/{conceptId}",
        "definition": { "schema": { "$ref": "#/backend/entities/Concept" }, "description": "Stores concepts extracted from notes within a notebook." }
      },
      {
        "path": "/patterns/{patternId}",
        "definition": { "schema": { "$ref": "#/backend/entities/Pattern" }, "description": "Stores recurring themes across multiple notebooks." }
      },
      {
        "path": "/sessions/{sessionId}",
        "definition": { "schema": { "$ref": "#/backend/entities/Session" }, "description": "Stores user work sessions." }
      },
      {
        "path": "/ledgerEntries/{ledgerEntryId}",
        "definition": { "schema": { "$ref": "#/backend/entities/LedgerEntry" }, "description": "Stores the cognitive ledger trace." }
      },
      {
        "path": "/artifacts/{artifactId}",
        "definition": { "schema": { "$ref": "#/backend/entities/Artifact" }, "description": "Stores forgetting artifacts." }
      },
      {
        "path": "/events/{eventId}",
        "definition": { "schema": { "$ref": "#/backend/entities/Event" }, "description": "Stores analytics events." }
      }
    ]
  }
}

    